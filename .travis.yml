language: python
os: linux
dist: xenial
jobs:
  include:
  - name: Python 3.9 on Windows
    os: windows
    language: shell
    before_install:
    - choco install python --version 3.9.0
    - python -m pip install --upgrade pip
    env: PATH=/c/Python39:/c/Python39/Scripts:$PATH
  - name: Python 3.8 on Windows
    os: windows
    language: shell
    before_install:
    - choco install python --version 3.8.0
    - python -m pip install --upgrade pip
    env: PATH=/c/Python38:/c/Python38/Scripts:$PATH
  - name: Python 3.7 on Windows
    os: windows
    language: shell
    before_install:
    - choco install python --version 3.7.0
    - python -m pip install --upgrade pip
    env: PATH=/c/Python37:/c/Python37/Scripts:$PATH
  - name: Python 3.6 on Windows
    os: windows
    language: shell
    before_install:
    - choco install python --version 3.6.8
    - python -m pip install --upgrade pip
    env: PATH=/c/Python36:/c/Python36/Scripts:$PATH
  - name: Python 2.7 (64bit) on Windows
    os: windows
    language: shell
    before_install:
    - choco install python2
    - python -m pip install --upgrade pip
    env: PATH=/c/Python27:/c/Python27/Scripts:$PATH
  - name: Python 2.7 (32bit) on Windows
    os: windows
    language: shell
    before_install:
    - choco install python2 --x86
    - python -m pip install --upgrade pip
    env: PATH=/c/Python27:/c/Python27/Scripts:$PATH
  - name: Python 2.7 on Xenial Linux
    python: 2.7
install:
- pip install .
- pip list
before_script:
- python -c "import sys; print('Python verion ={}, sys.platform={}, is 64bit? = {}'.format(sys.version_info.major,
  sys.platform, (sys.maxsize > 2**32)))"
script:
- if [ $TRAVIS_OS_NAME != linux ]; then python ./test_imports.py; fi
deploy:
  provider: pypi
  username: __token__
  password:
    secure: SnXvBCW7Bhe1mBvX+iFAU28nXIZDA/7GX1e9LkaEQhJNrJ8St9Mpd7qMT/4mnSNwPeFz6t+aHDXyFPVwOuRY0+HuwE8saDjgqVEr+USzz2mjjXxT3L/Mgil7CFlJacmcQ579zta2nxvfK95T2kNPiUOnqXdyAybMvJn/VzOJcdjYdJuEuecIGcQVk2DdRfz6YSvI6QPVlSd7BSKwm+OjpSt0yNmeiuNCwqKf8kYsL1tDJLiTKLRFmwag9C05oneYR/SQmcL4emw8G4UwiYnizVQVzyhAapOE2QVVkDodR6ueJz3FdYYhm4ywj70sGHZkpjtt5OKfY2jLGoD4Z2+zBg7uDy4ZKdOTQBqVybVma10WzBRLsn/CjMNGoLv7dWn9RWV+iwkV223cTp72Cl4kdVKqYsy8IN4pbn9F5mFr0d6rRlYn39e3kLNFtbYfMRrWhOmRhBvxl/yO8mVWThcLqIVqNj1s6hMbmg6vl0Tt2kTOYGIeyi0kc8Qi0WmbbiJBSjtg42IzWztVqR5Yf2ixYGpQlZ9QZVWMjx+0QRz2GVRqmzHftH4Rkfrnsx/Pb8U2FWDHxsA61C38pQmiRP54+5JZNnUIRkxrL+57+FmI8LzJdFBJBjrsJp80Ue56M3xxHd4LIodknngfb6K4DuPgc72X/Im2F4sits6aXKIXY8s=
  distributions: sdist
  skip_existing: true
  skip_cleanup: true
  on:
    all_branches: true
    condition: ${TRAVIS_OS_NAME,,} =~ ^linux$ && "${TRAVIS_BRANCH,,} =~ ^(main|${TRAVIS_TAG,,})$"
