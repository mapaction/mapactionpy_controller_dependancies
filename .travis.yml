language: python
os: linux
dist: xenial
jobs:
  include:
  - name: Python 3.9 on Windows
    os: windows
    language: shell
    before_install:
    - choco install python --version 3.9.0
    - python -m pip install --upgrade pip
    env: PATH=/c/Python39:/c/Python39/Scripts:$PATH
  - name: Python 3.8 on Windows
    os: windows
    language: shell
    before_install:
    - choco install python --version 3.8.0
    - python -m pip install --upgrade pip
    env: PATH=/c/Python38:/c/Python38/Scripts:$PATH
  - name: Python 3.7 on Windows
    os: windows
    language: shell
    before_install:
    - choco install python --version 3.7.0
    - python -m pip install --upgrade pip
    env: PATH=/c/Python37:/c/Python37/Scripts:$PATH
  - name: Python 3.6 on Windows
    os: windows
    language: shell
    before_install:
    - choco install python --version 3.6.8
    - python -m pip install --upgrade pip
    env: PATH=/c/Python36:/c/Python36/Scripts:$PATH
  - name: Python 2.7 (64bit) on Windows
    os: windows
    language: shell
    before_install:
    - choco install python2
    - python -m pip install --upgrade pip
    env: PATH=/c/Python27:/c/Python27/Scripts:$PATH
  - name: Python 2.7 (32bit) on Windows
    os: windows
    language: shell
    before_install:
    - choco install python2 --x86
    - python -m pip install --upgrade pip
    env: PATH=/c/Python27:/c/Python27/Scripts:$PATH
  - name: Python 2.7 on Xenial Linux
    python: 2.7
install:
- pip install .
- pip list
before_script:
- python -c "import sys; print('Python verion ={}, sys.platform={}, is 64bit? = {}'.format(sys.version_info.major,
  sys.platform, (sys.maxsize > 2**32)))"
script:
- if [ $TRAVIS_OS_NAME != linux ]; then python ./test_imports.py; fi
deploy:
  provider: pypi
  username: asmith_mapaction
  password:
    secure: buliEVoOE+jNKkoRoxri+PONlRE1p/ir9Lw0xUpayeZuwECTIoTTMshjaZ4L/0Wzv1kmKkr+S7d2hkMmxtqdemooed2fcBJK63657ee2yHb7Cx7Ymy1uxbdG4XeANo2ey694bPsBxAHAeSDMX1TwQxmDRxq0K3FzooBK5tlyiM4mt2uqebmSiJbPyHeX7vYprcPkqxm5oxVkt+MseRJpFDkT4rQLTOtJ64tTc4hWXUUF0Z7N74o9fvRN3VIGByFpbRxdRQOlBg5Nhd327dLZWsuIXYH4+52tsM3vAd63gOeorLRugwJX15GmsM2CZZxKu39rZeJxVVza6cKj+uGkc5JxukgMnfrzTF8OQbEciH5+smnIY6rEv858/xGtzxogHZizOulswroa0ghs69bjAgBBzBO5UVwSRgTZMBED5cC7QAPBmwCGUez0xh+8lyIwc5PneCT3En7K+pFlMSVqS21WUJq+wBEEJAqviKC+RHa5q0cdoBMzBvzfHomRn0s/Rww0UezrAZnNQ59YLLQz0FIt1xzwCG8ImCpiaj4OHeQeRQEubSobHCo/Pzg53SwTriSdCUa+SHAX+N24dlzVTzoJu1g8NWyOtpu7fJQSlaTS60p+baay3HXmdb3y8K5Aw0gouFStiaqMkcKXTQ8a6i5FPE9iJbKL6O9dLwUrz24=
  distributions: sdist
  skip_existing: true
  skip_cleanup: true
  on:
    all_branches: true
    condition: ${TRAVIS_OS_NAME,,} =~ ^linux$ && "${TRAVIS_BRANCH,,} =~ ^(main|${TRAVIS_TAG,,})$"
