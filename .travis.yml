language: python
os: linux
dist: xenial
jobs:
  include:
  - name: Python 3.9 on Windows
    os: windows
    language: shell
    before_install:
    - choco install python --version 3.9.0
    - python -m pip install --upgrade pip
    env: PATH=/c/Python39:/c/Python39/Scripts:$PATH
  - name: Python 3.8 on Windows
    os: windows
    language: shell
    before_install:
    - choco install python --version 3.8.0
    - python -m pip install --upgrade pip
    env: PATH=/c/Python38:/c/Python38/Scripts:$PATH
  - name: Python 3.7 on Windows
    os: windows
    language: shell
    before_install:
    - choco install python --version 3.7.0
    - python -m pip install --upgrade pip
    env: PATH=/c/Python37:/c/Python37/Scripts:$PATH
  - name: Python 3.6 on Windows
    os: windows
    language: shell
    before_install:
    - choco install python --version 3.6.8
    - python -m pip install --upgrade pip
    env: PATH=/c/Python36:/c/Python36/Scripts:$PATH
  - name: Python 2.7 (64bit) on Windows
    os: windows
    language: shell
    before_install:
    - choco install python2
    - python -m pip install --upgrade pip
    env: PATH=/c/Python27:/c/Python27/Scripts:$PATH
  - name: Python 2.7 (32bit) on Windows
    os: windows
    language: shell
    before_install:
    - choco install python2 --x86
    - python -m pip install --upgrade pip
    env: PATH=/c/Python27:/c/Python27/Scripts:$PATH
install:
- pip install .
- pip list
before_script:
- python -c "import sys; print('Python verion ={}, sys.platform={}, is 64bit? = {}'.format(sys.version_info.major,
  sys.platform, (sys.maxsize > 2**32)))"
script:
- python ./test_imports.py
deploy:
  provider: pypi
  username: asmith_mapaction
  password:
    secure: Pn5LTS1Jjr8s2HhmpCDUwNdufL1saUbBELldYi7gLzE4gS3LPv1X6Pr9HJ+j7ZVuAeV5j8tGWwFNanJgPXILVUzZMYR//GeMUuFUV7+LOUKvYwMXDfBjpmYAIh0trzzz20HCa/0TAiGDUUrYw7BEIKDPiIDLsPueoUTn7cFwHsDSENB/MEvQgNNaATz1KIGaBa+4YU5DVWKgdImqx1k3Ot2kvGtRy1eIrv4xe7WmjFHj/WYTB1rgDyteNvl3rXzh7P9XqeHKiQf2PU/az14R6HumUwU+lNV2nP5YKtmS8NBTJi9VW7H2zzYLlxC+NGVn1j5kaMz+sV+7mvl0ffKvCc+jyGf9iBZnlffajPjaZbtF+SyIY94vyCZBsyB5XwFWDme82v4Pv4t28l+2dmMB7JqC7XeoAWGKtE+QTKEnKk7yRYsXWFT79m2tag7An0/NcKeXVkwQuaTwD7BGAv2p5YL+itaAKl7okskiOOKF02SrkINUeab1EU90xQONx9PCNKzBrubX4WYBVAHzztRdVCh94zwo383mOBPxUMU96ST/ITCkGbEndPM1a1tPQH8GI+jwcqOfFPnfJA+bLNNe7hZT3yzPmNCWe+zB4irnP/A89L5Gmz3B+wBW+f7wQzhdldPtIUk2sxZo3LlLVQeGhzMlbcy1THcDW5r1nPTKqvs=
  distributions: sdist
  skip_existing: true
  skip_cleanup: true
  on:
    all_branches: true
    condition: "${TRAVIS_BRANCH,,} =~ ^(main|${TRAVIS_TAG,,})$"
